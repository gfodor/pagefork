// Generated by CoffeeScript 1.4.0
(function() {

  chrome.browserAction.onClicked.addListener(function(tab) {
    return chrome.pageCapture.saveAsMHTML({
      tabId: tab.id
    }, function(mhtml) {
      var reader;
      reader = new FileReader();
      reader.addEventListener("loadend", function() {
        var payload;
        payload = {
          mhtml: reader.result
        };
        return $.post("https://phork.io/phorks", JSON.stringify(payload), function(response) {
          return console.log("OK");
        });
      });
      return reader.readAsText(mhtml);
    });
  });

}).call(this);
